<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" type="text/css" href="/css/dashboard.css">
</head>
<body>
<div class="widget memory-stat">
<p><%= mem_total = mem_info["MemTotal"].to_f 
(mem_total / 1024) > 1024 ? ((mem_total / 1024) / 1024).round(2).to_s + " GB" : (mem_total / 1024).round(2).to_s + " MB" %> Total</p>
<p><%= mem_free = mem_info["MemFree"].to_f 
(mem_free / 1024) > 1024 ? ((mem_free / 1024) / 1024).round(2).to_s + " GB" : (mem_free / 1024).round(2).to_s + " MB" %> Free</p>
<p><%= mem_avail = mem_info["MemAvailable"].to_f 
(mem_avail / 1024) > 1024 ? ((mem_avail / 1024) / 1024).round(2).to_s + " GB" : (mem_avail / 1024).round(2).to_s + " MB" %> Available</p>
</div>
<div class="memory-bars">
<p class="before-bar">Free Memory: </p>
<div class="bar">
<div class="bar-fill" style="width: <%= (mem_info["MemFree"].to_f / mem_info["MemTotal"].to_f) * 100 %>%;"></div>
</div>
</div>

<div class="widget storage">
 <% devices = get_storage
    devices.each do |x| %>
 <p> <%= x = x.split(/\s{1,}/)
      "#{x[5]} is at #{x[4]} (#{kb_to_size(x[2].to_f)}" %> used of <%= kb_to_size(x[2].to_f + x[3].to_f) %>)</p>
 <% end %>
</div>

<div class="widget cpu-stat">
<p>Max CPU: <%=
cpu = `lscpu | grep -e "CPU max"`.split(":")[1].to_f
cpu > 1000 ? (cpu / 1000).round(2).to_s + "Ghz" : cpu.round(2).to_s + "Mhz" %></p>
<p class="mincpu inline">Min </p><p class="inline">CPU: <%=
cpu = `lscpu | grep -e "CPU min"`.split(":")[1].to_f
cpu > 1000 ? (cpu / 1000).round(2).to_s + "Ghz" : cpu.to_i.to_s + "Mhz" %></p>
<p>CPU Usage: <%= Cpu.usage %>% </p>
</div>
<div class="memory-bars">
<p class="before-bar">CPU Usage: </p>
<div class="bar">
<div class="bar-fill" style="width: <%= Cpu.usage %>%;"></div>
</div>
</div>
<br><br>
<div class="widget top-stat">
<pre>
<%= top_info = `top -bn1`.split("\n")
small_top = top_info[0...20].join("\n") %>
</pre>
</div>
</body>
</html>
